[{"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\index.js":"1","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\App.js":"2","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\reportWebVitals.js":"3","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\components\\PlayerButton.js":"4","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\components\\HomeToolbar.js":"5","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\store.js":"6","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\components\\PopoverItem.js":"7","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\rootReducer.js":"8","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\index.js":"9","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ClientData\\clientDataReducer.js":"10","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ActiveDrones\\activeDronesReducer.js":"11","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\Alert\\alertReducer.js":"12","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\MissionButtons\\missionButtonsReducer.js":"13","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\MissionButtons\\missionButtonsActions.js":"14","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ClientData\\clientDataActions.js":"15","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\Alert\\alertActions.js":"16","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ActiveDrones\\activeDronesActions.js":"17","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\Alert\\alertTypes.js":"18","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ActiveDrones\\activeDronesTypes.js":"19","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ClientData\\clientDataTypes.js":"20","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\MissionButtons\\missionButtonsTypes.js":"21","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\components\\GoogleMap.js":"22"},{"size":715,"mtime":1615901406198,"results":"23","hashOfConfig":"24"},{"size":807,"mtime":1615909887787,"results":"25","hashOfConfig":"24"},{"size":375,"mtime":1615833435785,"results":"26","hashOfConfig":"24"},{"size":6205,"mtime":1615833435718,"results":"27","hashOfConfig":"24"},{"size":15389,"mtime":1615927013654,"results":"28","hashOfConfig":"24"},{"size":372,"mtime":1615925632371,"results":"29","hashOfConfig":"24"},{"size":7617,"mtime":1615833435718,"results":"30","hashOfConfig":"24"},{"size":518,"mtime":1615833435784,"results":"31","hashOfConfig":"24"},{"size":223,"mtime":1615910972076,"results":"32","hashOfConfig":"24"},{"size":853,"mtime":1615833435780,"results":"33","hashOfConfig":"24"},{"size":1056,"mtime":1615833435773,"results":"34","hashOfConfig":"24"},{"size":935,"mtime":1615833435777,"results":"35","hashOfConfig":"24"},{"size":1336,"mtime":1615833435782,"results":"36","hashOfConfig":"24"},{"size":1388,"mtime":1615833435782,"results":"37","hashOfConfig":"24"},{"size":6272,"mtime":1615935110734,"results":"38","hashOfConfig":"24"},{"size":1202,"mtime":1615833435776,"results":"39","hashOfConfig":"24"},{"size":1317,"mtime":1615833435772,"results":"40","hashOfConfig":"24"},{"size":210,"mtime":1615833435777,"results":"41","hashOfConfig":"24"},{"size":132,"mtime":1615833435774,"results":"42","hashOfConfig":"24"},{"size":111,"mtime":1615833435780,"results":"43","hashOfConfig":"24"},{"size":200,"mtime":1615833435784,"results":"44","hashOfConfig":"24"},{"size":2754,"mtime":1615934916614,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"j45xw8",{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"48"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"48"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":44,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59","usedDeprecatedRules":"48"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"48"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"73","usedDeprecatedRules":"48"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"78","usedDeprecatedRules":"48"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"48"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"94"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":1,"source":"99","usedDeprecatedRules":"48"},"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\index.js",[],["100","101"],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\App.js",["102"],"import React, { Component } from 'react';\r\nimport { Provider } from 'react-redux'\r\nimport HomeToolbar from './components/HomeToolbar';\r\nimport background from './images/background.png';\r\nimport './custom.css'\r\nimport PlayerButton from './components/PlayerButton';\r\nimport GoogleMap from './components/GoogleMap';\r\nimport store from './redux/store'\r\n\r\n\r\n\r\nexport default class App extends Component {\r\n  static displayName = App.name;\r\n\r\n  render () {\r\n    return (\r\n        <Provider store={store}>\r\n            <div className=\"mainDiv\">\r\n                <HomeToolbar />\r\n                <GoogleMap />\r\n                <div style={{ position: 'absolute', bottom: '10px'}}>\r\n                    <PlayerButton />                \r\n                </div>\r\n            </div>\r\n        </Provider>\r\n    );\r\n  }\r\n}","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\reportWebVitals.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\components\\PlayerButton.js",["103"],"import '@fortawesome/fontawesome-free/css/all.min.css'; \r\nimport 'bootstrap-css-only/css/bootstrap.min.css'; \r\n//import 'mdbreact/dist/css/mdb.css';\r\nimport React, { useState,useEffect } from \"react\";\r\n//import { MDBBtn, MDBIcon } from \"mdbreact\";\r\nimport { connect } from 'react-redux'\r\nimport { sendDronePause, sendDroneResume, sendDroneReturnHome } from '../redux'\r\nimport pauseIcon from '../images/pause_icon.png';\r\nimport playIcon from '../images/play_icon.png';\r\nimport stopIcon from '../images/stop_icon.png';\r\n\r\n\r\n\r\nfunction PlayerButton(props) {\r\n    const [playerButton,setPlayerButton] = useState(true)\r\n    const vehicleId = (props.droneData &&\r\n                       props.droneData.droneDataArr && \r\n                       props.droneData.droneDataArr[1] && \r\n                       props.droneData.droneDataArr[1].vehicleId)\r\n\r\n    const vehicleState = (props.droneData &&\r\n                          props.droneData.droneDataArr && \r\n                          props.droneData.droneDataArr[1] && \r\n                          props.droneData.droneDataArr[1].state)\r\n\r\n    const isOnFlight = ((vehicleState === 'pauseState') || (vehicleState === 'resumeState'))                     \r\n\r\n      //1)need to check and handle props.error?    !!!!!!!!!!!\r\n      //2)keep tracking drone while returns home, when it get home -> drone became disabled.\r\n      //   until then pause and resume should be available.\r\n    useEffect(() => {\r\n        console.log(\"vehicle state changed\");\r\n        console.log(vehicleState);\r\n        console.log(props.droneData);\r\n      if(vehicleState === 'pauseState'){\r\n        setPlayerButton(true)\r\n      }//pause button pressed => change to play button \r\n      else if(vehicleState === 'resumeState'){\r\n        setPlayerButton(false)\r\n      } //play button pressed => change to pause button\r\n      else {\r\n        setPlayerButton(true)\r\n      } //stop button pressed => change to play button (disabled)\r\n    }, [vehicleState])\r\n\r\n    \r\n\r\n    const clickHandle = () => {\r\n      if(isOnFlight && playerButton )\r\n        //'play-circle' button pressed\r\n        props.sendDroneResume(props.clientId,vehicleId)\r\n          \r\n      else if(isOnFlight && !playerButton)\r\n        //'pause' button pressed\r\n        props.sendDronePause(props.clientId,vehicleId)   \r\n    }\r\n\r\n    const stopClickHandle = () => {\r\n        props.sendDroneReturnHome(props.clientId,vehicleId) \r\n    }\r\n/*\r\n    const [playerIcon,setPlayerIcon] = useState('play-circle')\r\n\r\n useEffect(() => {\r\n      if(vehicleState === 'pauseState') setPlayerIcon('play-circle')//pause button pressed => change to play button \r\n      else if(vehicleState === 'resumeState') setPlayerIcon('pause')//play button pressed => change to pause button\r\n      else setPlayerIcon('play-circle')                             //stop button pressed => change to play button (disabled)\r\n    }, [vehicleState])\r\n\r\n\r\n    const clickHandle = () => {\r\n      if(isOnFlight && playerIcon === 'play-circle')\r\n        //'play-circle' button pressed\r\n        props.sendDroneResume(props.droneData.clientId,vehicleId)\r\n          \r\n      else if(isOnFlight && playerIcon === 'pause')\r\n        //'pause' button pressed\r\n        props.sendDronePause(props.droneData.clientId,vehicleId)   \r\n    }\r\n\r\n    <MDBBtn tag=\"a\" size=\"lg\" color=\"grey\" className=\"button\" onClick={stopClickHandle}\r\n             style={{\"borderRadius\":\"50%\",\"paddingLeft\": \"16px\",\"paddingRight\":\"16px\"}}>  \r\n            <MDBIcon icon=\"stop\" size=\"4x\"/>\r\n            </MDBBtn>\r\n            <MDBBtn tag=\"a\" size=\"lg\" color=\"grey\" className=\"button\" onClick={clickHandle}\r\n             style={{\"borderRadius\":\"50%\",\"paddingLeft\": \"16px\",\"paddingRight\":\"16px\"}}>\r\n              <MDBIcon icon={playerIcon} size=\"4x\"/>\r\n            </MDBBtn>\r\n*/\r\n\r\n    return (\r\n        <div style={{ backgroundColor: \"#f2f2f2\", marginLeft: \"50px\", height: \"60px\", width: \"150px\", borderColor: \"black\", borderRadius: \"25px\", backgroundImage: \"linear-gradient(to top, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 100%)\" }}>\r\n        {\r\n          isOnFlight ?\r\n          (<React.Fragment>\r\n            <div style={{height:\"auto\", width:\"110px\", margin:\"0 auto\", position:\"center\"}}>\r\n              <button className=\"button\" onClick={clickHandle} style={{borderRadius:\"50%\", height:\"50px\", width:\"50px\", paddingLeft:\"16px\", paddingRight:\"20px\", backgroundImage:playerButton?`url(${playIcon})`:`url(${pauseIcon})`, backgroundSize: \"cover\"}}>\r\n              </button>\r\n              <button className=\"button\" onClick={stopClickHandle} style={{borderRadius:\"50%\", height:\"50px\", width:\"50px\", marginLeft:\"5px\", paddingLeft:\"16px\", paddingRight:\"16px\", backgroundImage:`url(${stopIcon})`, backgroundSize: \"cover\"}}>\r\n              </button>\r\n            </div>\r\n          </React.Fragment>) \r\n          :\r\n          (<React.Fragment>\r\n            <div style={{height:\"auto\", width:\"110px\", margin:\"0 auto\", position:\"relative\"}}>\r\n              <button className=\"button\" disabled onClick={clickHandle} style={{borderRadius:\"50%\", height:\"50px\", width:\"50px\", paddingLeft:\"16px\", paddingRight:\"16px\", backgroundImage:playerButton?`url(${playIcon})`:`url(${pauseIcon})`, backgroundSize: \"cover\"}}>\r\n              </button>\r\n              <button className=\"button\" disabled onClick={stopClickHandle} style={{borderRadius:\"50%\", height:\"50px\", width:\"50px\", marginLeft:\"5px\", paddingLeft:\"16px\", paddingRight:\"16px\", backgroundImage:`url(${stopIcon})`, backgroundSize: \"cover\"}}>\r\n              </button>\r\n            </div>\r\n          </React.Fragment>\r\n          )\r\n          \r\n        }\r\n      </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loading: state.clientData.loading,\r\n    clientId: state.clientData.clientId,\r\n    droneData: state.clientData.droneData,\r\n    error: state.clientData.error\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n      sendDronePause: (cId,vId) => dispatch(sendDronePause(cId,vId)),\r\n      sendDroneResume: (cId,vId) => dispatch(sendDroneResume(cId,vId)),\r\n      sendDroneReturnHome: (cId,vId) => dispatch(sendDroneReturnHome(cId,vId))\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(PlayerButton)\r\n","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\components\\HomeToolbar.js",["104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147"],"import React, { useState, useEffect, useRef} from 'react'\r\nimport { connect } from 'react-redux'\r\nimport logo from '../images/logo.png';\r\nimport { sendDroneMission, startConnection, isDroneAvailable, setAlertOn, setAlertOff, setFlyByState, setMarketingShotState, setCriticalHolesState, setPerimSweapState, activateDrone1, deactivateDrone1, activateDrone2, deactivateDrone2 } from '../redux';\r\nimport PopoverItem from './PopoverItem'\r\nimport { Alert } from '@material-ui/lab'\r\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Input, Label } from 'reactstrap';\r\nimport { ContactSupportOutlined } from '@material-ui/icons';\r\n\r\n\r\n\r\nfunction HomeToolbar(props) {\r\n\r\n    const containerRef = useRef();\r\n    const { current } = containerRef;\r\n    const flyByInterval = useRef();\r\n    const marketingShotInterval = useRef();\r\n    const criticalHolesInterval = useRef();\r\n    const perimSweapInterval = useRef();\r\n    const [popupData, setPopupData] = useState({open: false, mission:''});\r\n\r\n\r\n    useEffect(() => {\r\n        props.startConnection(props.clientId);\r\n    }, [current]);\r\n\r\n\r\n\r\n\r\n    //-------------------------------BasicMissionExecution---------------------------------\r\n    const handleMissionExecution = (chosen, vId, idx, mission) => {\r\n        if (chosen == 1)\r\n            props.activateDrone1(vId, mission, idx);\r\n        else\r\n            props.activateDrone2(vId, mission, idx);\r\n        props.sendDroneMission(mission, props.clientId, vId, false);\r\n    }\r\n\r\n    const handleMissionClick = (mission) => {\r\n        if ((props.drone1Id != 0) && (props.drone2Id != 0)) { //no available drone\r\n            //props.setError(\"There is currently no available drone\")\r\n            if ((props.drone1Mission == mission) || (props.drone2Mission == mission)) { //one of the drone already perform the mission\r\n                props.setAlertOn(true, `There is already a drone that performs ${mission} mission`);\r\n            }\r\n            else if ((props.drone1Mission == \"PerimSweap\") || (props.drone2Mission == \"PerimSweap\")) { //one of the drones perform perimSweap - automatically switch mission\r\n                var chosen = (props.drone1Mission == \"PerimSweap\") ? 1 : 2;\r\n                if (chosen == 1) {\r\n                    handleMissionExecution(chosen, props.drone1Id, props.drone1Idx, mission);\r\n                    props.setAlertOn(false, `Drone 1 mission changed from Perimeter Sweep to ${mission}`);\r\n                }\r\n                else{\r\n                    handleMissionExecution(chosen, props.drone2Id, props.drone2Idx, mission);\r\n                    props.setAlertOn(false, `Drone 2 mission changed from Perimeter Sweep to ${mission}`);\r\n                }\r\n\r\n\r\n                //TODO: check if the switch succeded\r\n                props.setPerimSweapState(false);\r\n            }\r\n            else {//let the user decide using popup\r\n                setPopupData({ open: true, mission: mission });\r\n            }\r\n        }\r\n        else {\r\n            var chosen = (props.drone1Id == 0) ? 1 : 2; // chosen = available drone\r\n            for (var i = 0; i < props.droneData.droneDataArr.length; i++) {\r\n                if (props.droneData.droneDataArr[i].state == \"stopState\") {\r\n                    handleMissionExecution(chosen, props.droneData.droneDataArr[i].vehicleId, i, mission);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    //-------------------------------FlyBy---------------------------------\r\n    const flyByCheck = async () => {\r\n        const vId = (props.flyBy == 1) ? props.activateDrone1 : props.activateDrone2;\r\n        const isAvailable = await props.isDroneAvailable(props.clientId, vId);\r\n        if (isAvailable) {\r\n            props.setFlyByState(false);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.flyBy) {\r\n            flyByInterval.current = setInterval(flyByCheck, 1000);\r\n        }\r\n        else{\r\n            clearInterval(flyByInterval.current);\r\n            if (props.flyByDrone == 1 && props.drone1Mission == \"FlyBy\")//if the deactivation didnt happend due to mission switch\r\n                props.deactivateDrone1();\r\n            else if (props.flyByDrone == 2 && props.drone2Mission == \"FlyBy\")\r\n                props.deactivateDrone2();\r\n        }\r\n    }, [props.flyBy])\r\n\r\n    async function handleFlyByClick() {\r\n        handleMissionClick(\"FlyBy\");\r\n    }\r\n\r\n    //------------------------------MarketingShot--------------------------------\r\n    const marketingShotCheck = async () => {\r\n        const vId = (props.marketingShot == 1) ? props.activateDrone1 : props.activateDrone2;\r\n        const isAvailable = await props.isDroneAvailable(props.clientId, vId);\r\n        if (isAvailable) {\r\n            props.setMarketingShotState(false);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.marketingShot) {\r\n            marketingShotInterval.current = setInterval(marketingShotCheck, 1000);\r\n        }\r\n        else {\r\n            clearInterval(marketingShotInterval.current);\r\n            if (props.marketingShotDrone == 1 && props.drone1Mission == \"MarketingShot\")//if the deactivation didnt happend due to mission switch\r\n                props.deactivateDrone1();\r\n            else if (props.marketingShotDrone == 2 && props.drone2Mission == \"MarketingShot\")\r\n                props.deactivateDrone2();\r\n        }\r\n    }, [props.marketingShot])\r\n\r\n    const handleMarketingShotClick = () => {\r\n        handleMissionClick(\"MarketingShot\");\r\n    }\r\n\r\n    //------------------------------CriticlHoles--------------------------------\r\n    const criticalHolesCheck = async () => {\r\n        const vId = (props.criticalHoles == 1) ? props.activateDrone1 : props.activateDrone2;\r\n        const isAvailable = await props.isDroneAvailable(props.clientId, vId);\r\n        if (isAvailable) {\r\n            props.setCriticalHolesState(false);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.criticalHoles) {\r\n            criticalHolesInterval.current = setInterval(criticalHolesCheck, 1000);\r\n        }\r\n        else {\r\n            clearInterval(criticalHolesInterval.current);\r\n            if (props.criticalHolesDrone == 1 && props.drone1Mission == \"CriticalHoles\")//if the deactivation didnt happend due to mission switch\r\n                props.deactivateDrone1();\r\n            else if (props.criticalHolesDrone == 2 && props.drone2Mission == \"CriticalHoles\")\r\n                props.deactivateDrone2();\r\n        }\r\n    }, [props.criticalHoles])\r\n\r\n    const handleCriticalHoles = () => {\r\n        handleMissionClick(\"CriticalHoles\");\r\n    }\r\n\r\n    //------------------------------PerimSweap--------------------------------\r\n    const perimSweapCheck = async () => {\r\n\r\n        const vId = (props.perimSweapDrone == 1)? props.activateDrone1 : props.activateDrone2;\r\n        const isAvailable = await props.isDroneAvailable(props.clientId, vId); //send a req to server to see of perimSweapDrone using drone2idx is available!!\r\n        if (isAvailable) {\r\n            props.setPerimSweapState(false);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.perimSweap) {\r\n            perimSweapInterval.current = setInterval(perimSweapCheck, 1000);\r\n        }\r\n        else {\r\n            clearInterval(perimSweapInterval.current);\r\n            if (props.perimSweapDrone == 1 && props.drone1Mission == \"PerimSweap\")//if the deactivation didnt happend due to mission switch\r\n                props.deactivateDrone1();\r\n            else if (props.perimSweapDrone == 2 && props.drone2Mission == \"PerimSweap\")\r\n                props.deactivateDrone2();\r\n        }\r\n    }, [props.perimSweap])\r\n\r\n    const handlePerimSweapClick = () => {\r\n        handleMissionClick(\"PerimSweap\");\r\n    }\r\n\r\n\r\n    //------------------------------HandlePopup------------------------------------ \r\n    const toggle = () => {\r\n        setPopupData({open: !popupData.open, mission: ''});\r\n    }\r\n\r\n    const handlePopup = () => {\r\n        const rbs = document.querySelectorAll('input[name=\"radio1\"]');\r\n        let selectedDrone;\r\n        for(var i = 0; i < rbs.length; i++){\r\n            let rb = rbs[i];\r\n            if(rb.checked){\r\n                selectedDrone = i + 1;\r\n                break;\r\n            }           \r\n        }\r\n\r\n        //the user didnt choose any option\r\n        if(selectedDrone == undefined){\r\n            toggle();\r\n            return;\r\n        }\r\n         \r\n        let prevMission;\r\n        //activate drone again to change the mission and sent execute mission midflight request\r\n        if (selectedDrone == 1) {\r\n            prevMission = props.drone1Mission;\r\n            props.activateDrone1(props.drone1Id, popupData.mission, props.drone1Idx);\r\n            props.sendDroneMission(popupData.mission, props.clientId, props.drone1Id, true);\r\n            \r\n\r\n        }\r\n        else {\r\n            prevMission = props.drone2Mission;\r\n            props.activateDrone2(props.drone2Id, popupData.mission, props.drone2Idx);\r\n            props.sendDroneMission(props.clientId, props.drone2Id, popupData.mission, true);\r\n        }\r\n\r\n        //TODO: need to check first if the switch worked \r\n        switch (prevMission) {\r\n            case \"FlyBy\":\r\n                props.setFlyByState(false);\r\n                break;\r\n            case \"MarketingShot\":\r\n                props.setMarketingShotState(false);\r\n                break;\r\n            case \"CriticalHoles\":\r\n                props.setCriticalHolesState(false);\r\n                break;\r\n            case \"PerimSweap\":\r\n                props.setPerimSweapState(false);\r\n                break;\r\n        }\r\n\r\n        props.setAlertOn(false, `Drone ${selectedDrone} mission changed from ${prevMission} Sweep to ${popupData.mission}`);\r\n\r\n        toggle();\r\n    }\r\n\r\n\r\n    //------------------------------HandleAlerts------------------------------------\r\n    useEffect(() => {\r\n        if (props.alertErrOn) {\r\n            setTimeout(() => {\r\n                props.setAlertOff(true);\r\n            }, 5000);\r\n        }\r\n    }, [props.alertErrOn])\r\n\r\n    useEffect(() => {\r\n        if (props.alertInfOn) {\r\n            setTimeout(() => {\r\n                props.setAlertOff(false);\r\n            }, 5000);\r\n        }\r\n    }, [props.alertInfOn])\r\n\r\n    //----------------------------------------------------------------------------------\r\n    //----------------------------------------------------------------------------------\r\n    return (\r\n        <div>\r\n            <div className=\"buttonPanel\">\r\n                <img className=\"logo\" src={logo} alt=\"Logo\" />\r\n                <button className=\"buttonPanel-btn\">Fly To Point</button>\r\n                <button className=\"buttonPanel-btn\" onClick={handleMarketingShotClick} style={{ color: props.marketingShot ? '#ff751a' : 'white' }}>Marketing Shot</button>\r\n                <button className=\"buttonPanel-btn\" onClick={handleFlyByClick} style={{ color: props.flyBy ? '#ff751a' : 'white' }}>FlyBy</button>\r\n                <button className=\"buttonPanel-btn\" onClick={handleCriticalHoles} style={{ color: props.criticalHoles ? '#ff751a' : 'white' }}>Critical Hole Shots</button>\r\n                <button className=\"buttonPanel-btn\" onClick={handlePerimSweapClick} style={{ color: props.perimSweap ? '#ff751a' : 'white' }}>Perimeter Sweep</button>\r\n                <PopoverItem />\r\n            </div>\r\n            {props.alertErrOn &&\r\n                <Alert severity=\"error\" style={{ color: 'black' }}>{`${props.errMsg}`}</Alert>\r\n            }\r\n            {props.alertInfOn &&\r\n                <Alert severity=\"info\" style={{ color: 'black' }}>{`${props.infMsg}`}</Alert>\r\n            }\r\n            <Modal isOpen={popupData.open} toggle={toggle}>\r\n                <ModalHeader toggle={toggle}>There is currently no available drone</ModalHeader>\r\n                <ModalBody>\r\n                    If you would like to change one of the drone's mission please select youre choise and press OK.\r\n                    <p>&nbsp;</p> \r\n                  <FormGroup tag=\"fieldset\">\r\n                        <FormGroup check>\r\n                            <Input id=\"radio1-option1\" type=\"radio\" name=\"radio1\"/>\r\n                            <Label check for=\"radio1-option1\">\r\n                                Stop drone 1 {`${props.drone1Mission}`} mission\r\n                            </Label>\r\n                        </FormGroup>\r\n                        <FormGroup check>\r\n                            <Input id=\"radio1-option2\" type=\"radio\" name=\"radio1\"/>\r\n                            <Label check for=\"radio1-option2\">\r\n                                Stop drone 2 {`${props.drone2Mission}`} mission\r\n                            </Label>\r\n                        </FormGroup>\r\n                    </FormGroup>\r\n                </ModalBody>\r\n                <ModalFooter>\r\n                    <button onClick={handlePopup} style={{ backgroundColor: '#004466', color: 'white'}}>OK</button>{' '}\r\n                </ModalFooter>\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loading: state.clientData.loading,\r\n        clientId: state.clientData.clientId,\r\n        droneData: state.clientData.droneData,\r\n\r\n        alertErrOn: state.alert.alertErrOn,\r\n        errMsg: state.alert.errMsg,\r\n        alertInfOn: state.alert.alertInfOn,\r\n        infMsg: state.alert.infMsg,\r\n            \r\n        flyBy: state.missionButtons.flyBy,\r\n        flyByDrone: state.missionButtons.flyByDrone,\r\n        marketingShot: state.missionButtons.MarketingShot,\r\n        marketingShotDrone: state.missionButtons.marketingShotDrone,\r\n        perimSweap: state.missionButtons.perimSweap,\r\n        perimSweapDrone: state.missionButtons.perimSweapDrone,\r\n        criticalHoles: state.missionButtons.criticalHoles,\r\n        criticalHolesDrone: state.missionButtons.criticalHolesDrone,\r\n\r\n        drone1Id: state.activeDrones.drone1Id,\r\n        drone1Mission: state.activeDrones.drone1Mission,\r\n        drone1Idx: state.activeDrones.drone1Idx,\r\n        drone2Id: state.activeDrones.drone2Id,\r\n        drone2Mission: state.activeDrones.drone2Mission,\r\n        drone2Idx: state.activeDrones.drone2Idx\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        sendDroneMission: (cId, vId, mission, midflight) => dispatch(sendDroneMission(cId, vId, mission, midflight)),\r\n        startConnection: (cId) => dispatch(startConnection(cId)),\r\n        isDroneAvailable: (clientId, vehicleId) => dispatch(isDroneAvailable(clientId, vehicleId)),\r\n\r\n        setAlertOn: (err, msg) => dispatch(setAlertOn(err, msg)), \r\n        setAlertOff: (err) => dispatch(setAlertOff(err)),\r\n\r\n        setFlyByState: (bState) => dispatch(setFlyByState(bState)),\r\n        setMarketingShotState: (bState) => dispatch(setMarketingShotState(bState)),\r\n        setPerimSweapState: (bState) => dispatch(setPerimSweapState(bState)),\r\n        setCriticalHolesState: (bState) => dispatch(setCriticalHolesState(bState)),\r\n\r\n        activateDrone1: (vid, mission) => dispatch(activateDrone1(vid, mission)),\r\n        activateDrone2: (vid, mission) => dispatch(activateDrone2(vid, mission)),\r\n        deactivateDrone1: () => dispatch(deactivateDrone1()),\r\n        deactivateDrone2: () => dispatch(deactivateDrone2())\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(HomeToolbar)\r\n\r\n\r\n\r\n","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\store.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\components\\PopoverItem.js",["148","149"],"import 'bootstrap/dist/css/bootstrap.min.css';\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport navBackground from '../images/navBackground.png';\r\nimport { Popover, PopoverBody } from \"reactstrap\";\r\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\nimport { connect } from 'react-redux'\r\nimport { updateDroneData } from '../redux'\r\n\r\nfunction PopoverItem(props) {\r\n\r\n\r\n    const [popoverOpen, setPopoverOpen] = useState(false)\r\n    const intervalRef = useRef()\r\n    const toggle = () => setPopoverOpen(!popoverOpen)\r\n    const [drone1Status, setDrone1Status] = useState({ status: \"stand by\", alt: 0, bat: 0, batteryPathColor: \"#a6a6a6\", droneTextClicked: false })\r\n    const [drone2Status, setDrone2Status] = useState({ status: \"stand by\", alt: 0, bat: 0, batteryPathColor: \"#a6a6a6\", droneTextClicked: false })\r\n\r\n\r\n    const updatePathColor = (bat) => {\r\n        if (bat <= 20)\r\n            return '#e60000';\r\n        else if (bat <= 100)\r\n            return '#4db8ff';\r\n        else\r\n            return '#a6a6a6';\r\n    }\r\n\r\n\r\n    const updateState = (state) => {\r\n        if (state === \"resumeState\" || state === \"pauseState\") \r\n            return \"airborne\"\r\n        else \r\n            return \"stand by\"\r\n    }\r\n\r\n    const fetchData = async () => {\r\n        await props.updateDroneData(props.clientId);        \r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        const ndrone1Alt = (props.droneData && props.droneData.droneDataArr && props.droneData.droneDataArr[0] && props.droneData.droneDataArr[0].altitudeAgl)\r\n        const ndrone2Alt = (props.droneData && props.droneData.droneDataArr && props.droneData.droneDataArr[1] && props.droneData.droneDataArr[1].altitudeAgl)\r\n        const ndrone1bat = (props.droneData && props.droneData.droneDataArr && props.droneData.droneDataArr[0] && props.droneData.droneDataArr[0].battery)\r\n        const ndrone2bat = (props.droneData && props.droneData.droneDataArr && props.droneData.droneDataArr[1] && props.droneData.droneDataArr[1].battery)\r\n        const ndrone1State = (props.droneData && props.droneData.droneDataArr && props.droneData.droneDataArr[0] && props.droneData.droneDataArr[0].state)\r\n        const ndrone2State = (props.droneData && props.droneData.droneDataArr && props.droneData.droneDataArr[1] && props.droneData.droneDataArr[1].state)\r\n\r\n        setDrone1Status({ ...drone1Status, status: updateState(ndrone1State), alt: ndrone1Alt, bat: ndrone1bat, batteryPathColor: updatePathColor(ndrone1bat) })\r\n        setDrone2Status({ ...drone2Status, status: updateState(ndrone2State,), alt: ndrone2Alt, bat: ndrone2bat, batteryPathColor: updatePathColor(ndrone2bat)})\r\n    }, [props.changed])\r\n\r\n/*\r\n    useEffect(() => {\r\n        updateState(2);\r\n        updatePathColor(2);\r\n    }, [drone2Changed])\r\n    */\r\n    useEffect(() => {\r\n        if (popoverOpen) {\r\n            intervalRef.current = setInterval(fetchData, 1000)\r\n            setDrone1Status({ ...drone1Status, droneTextClicked: true })\r\n            setDrone2Status({ ...drone2Status, droneTextClicked: true })\r\n        }\r\n        return () => {\r\n            clearInterval(intervalRef.current)\r\n            setDrone1Status({ ...drone1Status, droneTextClicked: false })\r\n            setDrone2Status({ ...drone2Status, droneTextClicked: false })\r\n        }\r\n    }, [popoverOpen])\r\n\r\n    const handleAltInterval = () => {\r\n        \r\n        props.updateDroneData(props.droneData.clientId)\r\n        if (drone1Status.droneTextClicked) {//if(!popoverOpen)\r\n            clearInterval(intervalRef.current)\r\n            setDrone1Status({ ...drone1Status, droneTextClicked: false })\r\n            setDrone2Status({ ...drone2Status, droneTextClicked: false })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <span>\r\n\r\n            <button\r\n                className=\"droneData-btn\"\r\n                id=\"Popover\"\r\n                type=\"button\"\r\n                onClick={handleAltInterval}\r\n            >\r\n                Drone\r\n            </button>\r\n            <Popover\r\n                placement=\"bottom\"\r\n                isOpen={popoverOpen}\r\n                target={\"Popover\"}\r\n                toggle={toggle}\r\n            >\r\n                <div style={{ display: 'flex', flexDirection: 'row' }}>\r\n                    <PopoverBody style={{\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        textAlign: 'center',\r\n                        backgroundImage: 'url(' + navBackground + ')',\r\n                        backgroundSize: 'cover',\r\n                        color: 'white'\r\n                    }}>\r\n                        <b style={{ marginBottom: \"10px\" }}> Drone 1:</b>\r\n                        <div style={{ textAlign: \"left\", marginBottom: \"10px\", display: 'flex', flexDirection: 'column' }}>\r\n                            <strong>status: {`${drone1Status.status}`}</strong>\r\n                            <strong>altitude: {`${drone1Status.alt}`}</strong>\r\n                        </div>\r\n                        <div style={{ width: 80, height: 80 }}>\r\n                            <CircularProgressbarWithChildren value={drone1Status.bat} styles={buildStyles({ strokeLinecap: 'butt', textSize: '14px', trailColor: '#a6a6a6', pathColor: drone1Status.batteryPathColor, textColor: '#ffffff' })}>\r\n                                <b style={{ fontSize: \"20px\" }}>{drone1Status.bat}%</b>\r\n                                <strong>Battery</strong>\r\n                            </CircularProgressbarWithChildren>\r\n                        </div>\r\n                    </PopoverBody>\r\n                    <PopoverBody style={{\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        textAlign: 'center',\r\n                        backgroundImage: 'url(' + navBackground + ')',\r\n                        backgroundSize: 'cover',\r\n                        color: 'white'\r\n                    }}>\r\n                        <b style={{ marginBottom: \"10px\" }}>Drone 2:</b>\r\n                        <div style={{ textAlign: \"left\", marginBottom: \"10px\", display: 'flex', flexDirection: 'column' }}>\r\n                            <strong>status: {`${drone2Status.status}`}</strong>\r\n                            <strong>altitude: {`${drone2Status.alt}`}</strong>\r\n                        </div>\r\n                        <div style={{ width: 80, heights: 80 }}>\r\n                            <CircularProgressbarWithChildren value={drone2Status.bat} styles={buildStyles({ strokeLinecap: 'butt', textSize: '14px', trailColor: '#a6a6a6', pathColor: drone2Status.batteryPathColor, textColor: '#ffffff' })}>\r\n                                <b style={{ fontSize: \"20px\" }}>{drone2Status.bat}%</b>\r\n                                <strong>Battery</strong>\r\n                            </CircularProgressbarWithChildren>\r\n                        </div>\r\n                    </PopoverBody>\r\n                </div>\r\n            </Popover>\r\n        </span>\r\n    )\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loading: state.clientData.loading,\r\n        clientId: state.clientData.clientId,\r\n        droneData: state.clientData.droneData,\r\n        error: state.clientData.error,\r\n        errMsg: state.clientData.errMsg,\r\n        changed: state.clientData.changed\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        updateDroneData: (cId) => dispatch(updateDroneData(cId))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PopoverItem)\r\n","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\rootReducer.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\index.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ClientData\\clientDataReducer.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ActiveDrones\\activeDronesReducer.js",["150","151","152"],"import {SET_DRONE1,\r\n     SET_DRONE2,\r\n     SET_CHOSEN_DRONE} from './activeDronesTypes'\r\n\r\nconst initialState = {\r\n    drone1Id: 0,\r\n    drone1Mission: '',\r\n    drone1Idx: 0,\r\n    drone2Id: 1,\r\n    drone2Mission:'',\r\n    drone2Idx: 0,\r\n    chosenDrone: 1\r\n}\r\n\r\nconst activeDronesReducer = (state=initialState, acion) => {\r\n    switch(acion.type){\r\n        case 'SET_DRONE1':\r\n            return {\r\n                ...state,\r\n                drone1Id: acion.payload.id,\r\n                drone1Mission: acion.payload.mission,\r\n                drone1Idx: acion.payload.idx\r\n            }\r\n        case 'SET_DRONE2':\r\n            return {\r\n                ...state,\r\n                drone2Id: acion.payload.id,\r\n                drone2Mission: acion.payload.mission,\r\n                drone2Idx: acion.payload.idx\r\n            }\r\n        case 'SET_CHOSEN_DRONE':\r\n            return{\r\n                ...state,\r\n                chosenDrone: acion.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default activeDronesReducer","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\Alert\\alertReducer.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\MissionButtons\\missionButtonsReducer.js",["153"],"﻿import { \r\n    SET_FLY_BY,\r\n    SET_MARKETING_SHOT,\r\n    SET_PERIM_SWEAP,\r\n    SET_CRITICAL_HOLES } from './missionButtonsTypes'\r\n\r\n\r\nconst initialState = {\r\n    flyBy: false,\r\n    flyByDrone: 1,\r\n    marketingShot: false,\r\n    marketingShotDrone: 1,\r\n    perimSweap: false,\r\n    perimSweapDrone: 1,\r\n    criticalHoles: false,\r\n    criticalHolesDrone: 1\r\n}\r\n\r\nconst missionButtonsReducer = (state = initialState, acion) => {\r\n    switch(acion.type){\r\n        case SET_FLY_BY: \r\n            return {\r\n                ...state,\r\n                flyBy: acion.payload.state,\r\n                flyByDrone: acion.payload.drone\r\n            }\r\n        case SET_MARKETING_SHOT: \r\n            return {\r\n                ...state,\r\n                marketingShot: acion.payload.state,\r\n                marketingShotDrone: acion.payload.drone\r\n            }\r\n        case SET_PERIM_SWEAP: \r\n            return {\r\n                ...state,\r\n                perimSweap: acion.payload.state,\r\n                perimSweapDrone: acion.payload.drone\r\n            }\r\n        case SET_CRITICAL_HOLES: \r\n            return {\r\n                ...state,\r\n                criticalHoles: acion.payload.state,\r\n                criticalHolesDrone: acion.payload.drone\r\n            }\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport default missionButtonsReducer","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\MissionButtons\\missionButtonsActions.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ClientData\\clientDataActions.js",["154","155","156"],"import axios from 'axios'\r\nimport { setFlyByState, setMarketingShotState, setPerimSweapState, setCriticalHolesState } from '../MissionButtons/missionButtonsActions'\r\nimport { setAlertOn } from '../Alert/alertActions'\r\nimport { \r\n    SEND_DRONE_REQUEST,\r\n    SEND_DRONE_SUCCESS,\r\n    SEND_DRONE_ERROR,\r\n    DELETE_ERROR\r\n} from './clientDataTypes'\r\n\r\n\r\nexport const sendDroneRequest = () => {\r\n    return{\r\n        type: SEND_DRONE_REQUEST\r\n    }\r\n}\r\n\r\nexport const sendDroneSuccess = droneData => {\r\n    return{\r\n        type: SEND_DRONE_SUCCESS,\r\n        payload: droneData\r\n    }\r\n}\r\n\r\nexport const startConnection = (clientId) => {\r\n    return (dispatch) => {\r\n        dispatch(sendDroneRequest())\r\n        axios.get(`Ugcs/startConnection/?clientId=${clientId}`)\r\n            .then(response => {\r\n                const data = response.data;\r\n                if (data.status === \"success\") {\r\n                    dispatch(sendDroneSuccess(data.droneData))\r\n                }\r\n                else if (data.status === \"error\") {\r\n                    console.log(\"ERROR\");\r\n                    dispatch(setAlertOn(true, data))\r\n                }\r\n            })\r\n            .catch(error => {\r\n                const errMsg = error.response.data\r\n                console.log(errMsg)\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const sendDroneMission = (mission, clientId, vehicleId, midflight) => {\r\n    return (dispatch) => {\r\n        axios.get(`Ugcs/executeMission/?clientId=${clientId}&mission=${mission}&vehicleId=${vehicleId}&midflight=${midflight}`)\r\n            .then(response => {\r\n                const data = response.data\r\n                if (data.status === \"success\") {\r\n                    dispatch(sendDroneSuccess(data.droneData))\r\n                    switch(mission){\r\n                        case 'FlyBy':\r\n                            dispatch(setFlyByState(true));\r\n                            break;\r\n                        case 'MarketingShot':\r\n                            dispatch(setMarketingShotState(true));\r\n                            break;\r\n                        case 'CriticalHoles':\r\n                            dispatch(setCriticalHolesState(true));\r\n                            break;\r\n                        case 'PerimSweap':\r\n                            dispatch(setPerimSweapState(true));\r\n                            break;\r\n                    }\r\n                }\r\n                else if (data.status === \"error\") {\r\n                    console.log(\"ERROR\");\r\n                    dispatch(setAlertOn(true, data.errMsg))\r\n                    return false;\r\n                }\r\n            })\r\n            .catch(error => {\r\n                const errMsg = error.response.data\r\n                console.log(errMsg)\r\n                return false;\r\n            })\r\n    }\r\n}\r\n\r\nexport const sendDronePause = (clientId,vehicleId) => {\r\n    return (dispatch) => {\r\n        dispatch(sendDroneRequest);\r\n        axios.get(`Ugcs/pauseMission?clientId=${clientId}&vehicleId=${vehicleId}`)\r\n            .then(response => {\r\n                const data = response.data;\r\n                if (data.status === \"success\") {\r\n                    dispatch(sendDroneSuccess(data.droneData));\r\n                }\r\n                else if (data.status === \"error\") {\r\n                    console.log(\"ERROR\");\r\n                    dispatch(setAlertOn(true, data.errMsg))\r\n                }\r\n                \r\n            })\r\n            .catch(error => {\r\n                const errMsg = error.response.data;\r\n                console.log(errMsg);\r\n            })\r\n    }\r\n}\r\n\r\nexport const sendDroneResume = (clientId,vehicleId) => {\r\n    return (dispatch) => {\r\n        dispatch(sendDroneRequest)\r\n        axios.get(`Ugcs/resumeMission?clientId=${clientId}&vehicleId=${vehicleId}`)\r\n            .then(response => {\r\n                const data = response.data\r\n                if (data.status === \"success\") {\r\n                    dispatch(sendDroneSuccess(data.droneData))\r\n                }\r\n                else if (data.status === \"error\") {\r\n                    console.log(\"ERROR\");\r\n                    dispatch(setAlertOn(true, data.errMsg))\r\n                }\r\n            })\r\n            .catch(error => {\r\n                const errMsg = error.response.data\r\n                console.log(errMsg)\r\n            })\r\n    }\r\n}\r\n\r\nexport const sendDroneReturnHome = (clientId,vehicleId) => {\r\n    return (dispatch) => {\r\n        dispatch(sendDroneRequest)\r\n        axios.get(`Ugcs/returnHomeMission?clientId=${clientId}&vehicleId=${vehicleId}`)\r\n            .then(response => {\r\n                const data = response.data\r\n                if (data.status === \"success\") {\r\n                    dispatch(sendDroneSuccess(data.droneData))\r\n                }\r\n                else if (data.status === \"error\") {\r\n                    console.log(\"ERROR\");\r\n                    dispatch(setAlertOn(true, data.errMsg))\r\n                }\r\n            })\r\n            .catch(error => {\r\n                const errMsg = error.response.data\r\n                console.log(errMsg)\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport const updateDroneData = (clientId) => {\r\n    return (dispatch) => {\r\n        dispatch(sendDroneRequest())\r\n        axios.get(`Ugcs/updateDronesData/?clientId=${clientId}`)\r\n            .then(response => {\r\n                const data = response.data;\r\n                if (data.status === \"success\") {\r\n                    dispatch(sendDroneSuccess(data.droneData))\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            })\r\n    }\r\n}\r\n\r\nexport const isDroneAvailable = (clientId, vehicleId) => {\r\n    return (dispatch) => {\r\n        dispatch(sendDroneRequest());\r\n        return axios.get(`Ugcs/isDroneAvailable/?clientId=${clientId}&vehicleId=${vehicleId}`)\r\n            .then(response => {\r\n                const data = response.data;\r\n                if (data.status === \"success\") {\r\n                    return data.result;\r\n                }\r\n                else if (data.status === \"error\") {\r\n                    dispatch(setAlertOn(true, data.errMsg))\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            })\r\n    }\r\n}\r\n","C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\Alert\\alertActions.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ActiveDrones\\activeDronesActions.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\Alert\\alertTypes.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ActiveDrones\\activeDronesTypes.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\ClientData\\clientDataTypes.js",[],["157","158"],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\redux\\MissionButtons\\missionButtonsTypes.js",[],"C:\\Users\\Yotam\\Documents\\FleetCopter\\FleetCopterPOC\\FleetCopterPOC\\ClientApp\\src\\components\\GoogleMap.js",["159","160"],"﻿import React, { useState, useRef, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { isDroneAvailable, updateDroneData } from '../redux';\r\nimport GoogleMapReact from 'google-map-react';\r\n\r\nconst AnyReactComponent = ({ text }) => <div>{text}</div>;\r\n\r\n\r\n\r\nfunction GoogleMap(props) {\r\n\r\n    const [currentDroneLocation, setCurrentDroneLocation] = useState({ latitude: 0.0, longitude: 0.0 });\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(async () => {\r\n            /*props.isDroneAvailable(props.clientId, 2).then(async (result) => {\r\n                if (result === false) {\r\n                    console.log(props.droneData);\r\n                    if (props.droneData && props.droneData.droneDataArr && props.droneData.droneDataArr[0].latitude && props.droneData.droneDataArr[0].longitude) {\r\n                        await setCurrentDroneLocation({ latitude: props.droneData.droneDataArr[0].latitude, longitude: props.droneData.droneDataArr[0].longitude });\r\n                    }\r\n                }\r\n            })*/\r\n            await props.updateDroneData(props.clientId);\r\n            if (props.droneData && props.droneData.droneDataArr && (props.droneData.droneDataArr[0].latitude || props.droneData.droneDataArr[0].longitude)) {\r\n                await setCurrentDroneLocation({ latitude: props.droneData.droneDataArr[0].latitude, longitude: props.droneData.droneDataArr[0].longitude });\r\n                console.log(\"LAT \" + props.droneData.droneDataArr[0].latitude);\r\n            }\r\n        }, 1000);\r\n\r\n        return () => {\r\n            clearInterval(interval);\r\n        }\r\n    }, [props])\r\n\r\n    return (\r\n        <div style={{ height: '100vh', width: '100%' }}>\r\n            <GoogleMapReact\r\n                bootstrapURLKeys={{ key: process.env.REACT_APP_API_KEY }}\r\n                defaultCenter={{ lat: 59.95, lng: 30.33 }}\r\n                defaultZoom={11}\r\n            >\r\n                <AnyReactComponent\r\n                    lat={currentDroneLocation.latitude}\r\n                    lng={currentDroneLocation.longitude}\r\n                    text=\"My Marker\"\r\n                />\r\n            </GoogleMapReact>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        clientId: state.clientData.clientId,\r\n        droneData: state.clientData.droneData,\r\n        drone1Id: state.activeDrones.drone1Id,\r\n        changed: state.clientData.changed\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        isDroneAvailable: (clientId, vehicleId) => dispatch(isDroneAvailable(clientId, vehicleId)),\r\n        updateDroneData: (cId) => dispatch(updateDroneData(cId))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GoogleMap)",{"ruleId":"161","replacedBy":"162"},{"ruleId":"163","replacedBy":"164"},{"ruleId":"165","severity":1,"message":"166","line":4,"column":8,"nodeType":"167","messageId":"168","endLine":4,"endColumn":18},{"ruleId":"169","severity":1,"message":"170","line":44,"column":8,"nodeType":"171","endLine":44,"endColumn":22,"suggestions":"172"},{"ruleId":"165","severity":1,"message":"173","line":7,"column":10,"nodeType":"167","messageId":"168","endLine":7,"endColumn":16},{"ruleId":"165","severity":1,"message":"174","line":8,"column":10,"nodeType":"167","messageId":"168","endLine":8,"endColumn":32},{"ruleId":"169","severity":1,"message":"175","line":25,"column":8,"nodeType":"171","endLine":25,"endColumn":17,"suggestions":"176"},{"ruleId":"177","severity":1,"message":"178","line":32,"column":20,"nodeType":"179","messageId":"180","endLine":32,"endColumn":22},{"ruleId":"177","severity":1,"message":"181","line":40,"column":29,"nodeType":"179","messageId":"180","endLine":40,"endColumn":31},{"ruleId":"177","severity":1,"message":"181","line":40,"column":54,"nodeType":"179","messageId":"180","endLine":40,"endColumn":56},{"ruleId":"177","severity":1,"message":"178","line":42,"column":38,"nodeType":"179","messageId":"180","endLine":42,"endColumn":40},{"ruleId":"177","severity":1,"message":"178","line":42,"column":74,"nodeType":"179","messageId":"180","endLine":42,"endColumn":76},{"ruleId":"177","severity":1,"message":"178","line":45,"column":43,"nodeType":"179","messageId":"180","endLine":45,"endColumn":45},{"ruleId":"177","severity":1,"message":"178","line":45,"column":84,"nodeType":"179","messageId":"180","endLine":45,"endColumn":86},{"ruleId":"177","severity":1,"message":"178","line":46,"column":51,"nodeType":"179","messageId":"180","endLine":46,"endColumn":53},{"ruleId":"177","severity":1,"message":"178","line":47,"column":28,"nodeType":"179","messageId":"180","endLine":47,"endColumn":30},{"ruleId":"182","severity":1,"message":"183","line":65,"column":17,"nodeType":"167","messageId":"184","endLine":65,"endColumn":23},{"ruleId":"177","severity":1,"message":"178","line":65,"column":42,"nodeType":"179","messageId":"180","endLine":65,"endColumn":44},{"ruleId":"177","severity":1,"message":"178","line":67,"column":59,"nodeType":"179","messageId":"180","endLine":67,"endColumn":61},{"ruleId":"177","severity":1,"message":"178","line":77,"column":34,"nodeType":"179","messageId":"180","endLine":77,"endColumn":36},{"ruleId":"177","severity":1,"message":"178","line":90,"column":34,"nodeType":"179","messageId":"180","endLine":90,"endColumn":36},{"ruleId":"177","severity":1,"message":"178","line":90,"column":62,"nodeType":"179","messageId":"180","endLine":90,"endColumn":64},{"ruleId":"177","severity":1,"message":"178","line":92,"column":39,"nodeType":"179","messageId":"180","endLine":92,"endColumn":41},{"ruleId":"177","severity":1,"message":"178","line":92,"column":67,"nodeType":"179","messageId":"180","endLine":92,"endColumn":69},{"ruleId":"169","severity":1,"message":"185","line":95,"column":8,"nodeType":"171","endLine":95,"endColumn":21,"suggestions":"186"},{"ruleId":"177","severity":1,"message":"178","line":103,"column":42,"nodeType":"179","messageId":"180","endLine":103,"endColumn":44},{"ruleId":"177","severity":1,"message":"178","line":116,"column":42,"nodeType":"179","messageId":"180","endLine":116,"endColumn":44},{"ruleId":"177","severity":1,"message":"178","line":116,"column":70,"nodeType":"179","messageId":"180","endLine":116,"endColumn":72},{"ruleId":"177","severity":1,"message":"178","line":118,"column":47,"nodeType":"179","messageId":"180","endLine":118,"endColumn":49},{"ruleId":"177","severity":1,"message":"178","line":118,"column":75,"nodeType":"179","messageId":"180","endLine":118,"endColumn":77},{"ruleId":"169","severity":1,"message":"187","line":121,"column":8,"nodeType":"171","endLine":121,"endColumn":29,"suggestions":"188"},{"ruleId":"177","severity":1,"message":"178","line":129,"column":42,"nodeType":"179","messageId":"180","endLine":129,"endColumn":44},{"ruleId":"177","severity":1,"message":"178","line":142,"column":42,"nodeType":"179","messageId":"180","endLine":142,"endColumn":44},{"ruleId":"177","severity":1,"message":"178","line":142,"column":70,"nodeType":"179","messageId":"180","endLine":142,"endColumn":72},{"ruleId":"177","severity":1,"message":"178","line":144,"column":47,"nodeType":"179","messageId":"180","endLine":144,"endColumn":49},{"ruleId":"177","severity":1,"message":"178","line":144,"column":75,"nodeType":"179","messageId":"180","endLine":144,"endColumn":77},{"ruleId":"169","severity":1,"message":"189","line":147,"column":8,"nodeType":"171","endLine":147,"endColumn":29,"suggestions":"190"},{"ruleId":"177","severity":1,"message":"178","line":156,"column":44,"nodeType":"179","messageId":"180","endLine":156,"endColumn":46},{"ruleId":"177","severity":1,"message":"178","line":169,"column":39,"nodeType":"179","messageId":"180","endLine":169,"endColumn":41},{"ruleId":"177","severity":1,"message":"178","line":169,"column":67,"nodeType":"179","messageId":"180","endLine":169,"endColumn":69},{"ruleId":"177","severity":1,"message":"178","line":171,"column":44,"nodeType":"179","messageId":"180","endLine":171,"endColumn":46},{"ruleId":"177","severity":1,"message":"178","line":171,"column":72,"nodeType":"179","messageId":"180","endLine":171,"endColumn":74},{"ruleId":"169","severity":1,"message":"191","line":174,"column":8,"nodeType":"171","endLine":174,"endColumn":26,"suggestions":"192"},{"ruleId":"177","severity":1,"message":"178","line":198,"column":26,"nodeType":"179","messageId":"180","endLine":198,"endColumn":28},{"ruleId":"177","severity":1,"message":"178","line":205,"column":27,"nodeType":"179","messageId":"180","endLine":205,"endColumn":29},{"ruleId":"193","severity":1,"message":"194","line":219,"column":9,"nodeType":"195","messageId":"196","endLine":232,"endColumn":10},{"ruleId":"169","severity":1,"message":"175","line":247,"column":8,"nodeType":"171","endLine":247,"endColumn":26,"suggestions":"197"},{"ruleId":"169","severity":1,"message":"175","line":255,"column":8,"nodeType":"171","endLine":255,"endColumn":26,"suggestions":"198"},{"ruleId":"169","severity":1,"message":"199","line":52,"column":8,"nodeType":"171","endLine":52,"endColumn":23,"suggestions":"200"},{"ruleId":"169","severity":1,"message":"201","line":71,"column":8,"nodeType":"171","endLine":71,"endColumn":21,"suggestions":"202"},{"ruleId":"165","severity":1,"message":"203","line":1,"column":9,"nodeType":"167","messageId":"168","endLine":1,"endColumn":19},{"ruleId":"165","severity":1,"message":"204","line":2,"column":6,"nodeType":"167","messageId":"168","endLine":2,"endColumn":16},{"ruleId":"165","severity":1,"message":"205","line":3,"column":6,"nodeType":"167","messageId":"168","endLine":3,"endColumn":22},{"ruleId":"206","severity":1,"message":"207","line":1,"column":1,"nodeType":"208","messageId":"180","fix":"209"},{"ruleId":"165","severity":1,"message":"210","line":7,"column":5,"nodeType":"167","messageId":"168","endLine":7,"endColumn":21},{"ruleId":"165","severity":1,"message":"211","line":8,"column":5,"nodeType":"167","messageId":"168","endLine":8,"endColumn":17},{"ruleId":"193","severity":1,"message":"194","line":56,"column":21,"nodeType":"195","messageId":"196","endLine":69,"endColumn":22},{"ruleId":"161","replacedBy":"212"},{"ruleId":"163","replacedBy":"213"},{"ruleId":"206","severity":1,"message":"207","line":1,"column":1,"nodeType":"208","messageId":"180","fix":"214"},{"ruleId":"165","severity":1,"message":"215","line":1,"column":27,"nodeType":"167","messageId":"168","endLine":1,"endColumn":33},"no-native-reassign",["216"],"no-negated-in-lhs",["217"],"no-unused-vars","'background' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'props.droneData'. Either include it or remove the dependency array.","ArrayExpression",["218"],"'Button' is defined but never used.","'ContactSupportOutlined' is defined but never used.","React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["219"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","Expected '!==' and instead saw '!='.","no-redeclare","'chosen' is already defined.","redeclared","React Hook useEffect has missing dependencies: 'flyByCheck' and 'props'. Either include them or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["220"],"React Hook useEffect has missing dependencies: 'marketingShotCheck' and 'props'. Either include them or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["221"],"React Hook useEffect has missing dependencies: 'criticalHolesCheck' and 'props'. Either include them or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["222"],"React Hook useEffect has missing dependencies: 'perimSweapCheck' and 'props'. Either include them or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["223"],"default-case","Expected a default case.","SwitchStatement","missingDefaultCase",["224"],["225"],"React Hook useEffect has missing dependencies: 'drone1Status', 'drone2Status', and 'props.droneData'. Either include them or remove the dependency array. You can also do a functional update 'setDrone1Status(d => ...)' if you only need 'drone1Status' in the 'setDrone1Status' call.",["226"],"React Hook useEffect has missing dependencies: 'drone1Status', 'drone2Status', and 'fetchData'. Either include them or remove the dependency array. You can also do a functional update 'setDrone1Status(d => ...)' if you only need 'drone1Status' in the 'setDrone1Status' call.",["227"],"'SET_DRONE1' is defined but never used.","'SET_DRONE2' is defined but never used.","'SET_CHOSEN_DRONE' is defined but never used.","unicode-bom","Unexpected Unicode BOM (Byte Order Mark).","Program",{"range":"228","text":"229"},"'SEND_DRONE_ERROR' is defined but never used.","'DELETE_ERROR' is defined but never used.",["216"],["217"],{"range":"230","text":"229"},"'useRef' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"231","fix":"232"},{"desc":"233","fix":"234"},{"desc":"235","fix":"236"},{"desc":"237","fix":"238"},{"desc":"239","fix":"240"},{"desc":"241","fix":"242"},{"desc":"243","fix":"244"},{"desc":"245","fix":"246"},{"desc":"247","fix":"248"},{"desc":"249","fix":"250"},[-1,0],"",[-1,0],"Update the dependencies array to be: [props.droneData, vehicleState]",{"range":"251","text":"252"},"Update the dependencies array to be: [current, props]",{"range":"253","text":"254"},"Update the dependencies array to be: [flyByCheck, props, props.flyBy]",{"range":"255","text":"256"},"Update the dependencies array to be: [marketingShotCheck, props, props.marketingShot]",{"range":"257","text":"258"},"Update the dependencies array to be: [criticalHolesCheck, props, props.criticalHoles]",{"range":"259","text":"260"},"Update the dependencies array to be: [perimSweapCheck, props, props.perimSweap]",{"range":"261","text":"262"},"Update the dependencies array to be: [props, props.alertErrOn]",{"range":"263","text":"264"},"Update the dependencies array to be: [props, props.alertInfOn]",{"range":"265","text":"266"},"Update the dependencies array to be: [drone1Status, drone2Status, props.changed, props.droneData]",{"range":"267","text":"268"},"Update the dependencies array to be: [drone1Status, drone2Status, fetchData, popoverOpen]",{"range":"269","text":"270"},[1948,1962],"[props.droneData, vehicleState]",[1086,1095],"[current, props]",[4298,4311],"[flyByCheck, props, props.flyBy]",[5380,5401],"[marketingShotCheck, props, props.marketingShot]",[6482,6503],"[criticalHolesCheck, props, props.criticalHoles]",[7630,7648],"[perimSweapCheck, props, props.perimSweap]",[10043,10061],"[props, props.alertErrOn]",[10238,10256],"[props, props.alertInfOn]",[2743,2758],"[drone1Status, drone2Status, props.changed, props.droneData]",[3391,3404],"[drone1Status, drone2Status, fetchData, popoverOpen]"]